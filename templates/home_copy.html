{% extends "base.html" %}
{% block graph %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable(
            {{graph_data| tojson}}
        );

    var options = {
        title: 'Company Performance',
        curveType: 'function',
        legend: { position: 'bottom' }
    };

    var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

    chart.draw(data, options);
  }
</script>
{% endblock %}
{% block title %}
Upload file
{% endblock %}
{% block content %}
<div class="row align-items-center">
    <div class="col-2"></div>
    <div class="col-8">
        <h1>Welcome to the passenger ship powering prediction API</h1>
    </div>
    <div class="col2"></div>
</div>
<div class="row align-items-center">
    <div class="col-2"></div>
    <div class="col-8">

        <!-- form for uploading files -->
        <form action="/uploadfile/" enctype="multipart/form-data" method="post">
            <div class="input-group mb-3">
                <input type="file" class="form-control" name="file">
                <input class="input-group-text" type="submit">
            </div>
        </form>

        <!-- table -->
        {{main_table | safe}}

        <!-- div to render chart -->
        <div id="curve_chart" style="width: 900px; height: 500px"></div>

        <!-- alt table -->
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    {% for item in alt_header %}
                    <th scope="col">{{item}}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for table_item in alt_table %}
                <tr>
                    {% for i in table_item %}
                    <td>{{i}}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>


    </div>
    <div class="col-2"></div>
</div>
{% endblock %}